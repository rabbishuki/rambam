@import "tailwindcss";

:root {
  --foreground: #171717;
  --font-noto-sans-hebrew: "Noto Sans Hebrew", sans-serif;
  /* Theme colors — defaults are teal, overridden by useTheme hook */
  --color-primary: #0d9488;
  --color-primary-dark: #0f766e;
  --color-accent: #f59e0b;
  --color-alt-date: #9333ea;
  --color-bg: #0d9488;
  --color-surface: #ffffff;
  --color-surface-hover: #f0fdfa;
  --color-surface-border: #e5e7eb;
  --color-text-primary: #1f2937;
  --color-text-secondary: #4b5563;
  --color-text-muted: #9ca3af;
  --color-completion-bg: #f0fdfa;
  --color-completion-border: #99f6e4;
  --color-completion-accent: #0d9488;
  --color-status-normal: #0d9488;
  --color-status-other-date: #dc2626;
  --color-status-offline: #f59e0b;
  --header-accent: var(--color-status-normal);
  --app-bg: var(--color-bg);
}

@theme inline {
  --color-foreground: var(--foreground);
  --font-sans: var(--font-noto-sans-hebrew), -apple-system, BlinkMacSystemFont,
    "Segoe UI", Roboto, sans-serif;
}

/* Base styles */
body {
  color: var(--foreground);
  font-family: var(--font-sans);
  -webkit-font-smoothing: antialiased;
  touch-action: pan-y;
  background: var(--color-surface-hover);
}

/* App shell — NOT Tailwind's .container (which adds responsive max-width) */
.app-shell {
  min-height: 100vh;
  background: var(--color-surface-hover);
}

/* Dark theme overrides */
[data-theme="dark"] .halakha-text b {
  color: var(--color-text-primary);
}

[data-theme="dark"] .halakha-text small {
  color: var(--color-text-secondary);
}

[data-theme="dark"] ::-webkit-scrollbar-track {
  background: #1e293b;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb {
  background: #475569;
}

[data-theme="dark"] ::-webkit-scrollbar-thumb:hover {
  background: #64748b;
}

/* RTL support */
[dir="rtl"] {
  text-align: right;
}

[dir="ltr"] {
  text-align: left;
}

/* Animations */
@keyframes btn-pulse {
  0%, 100% { filter: brightness(1); box-shadow: 0 1px 2px rgba(0,0,0,0.1); }
  50% { filter: brightness(1.25); box-shadow: 0 2px 12px rgba(59,130,246,0.5); }
}

@keyframes slide-up {
  from {
    transform: translateY(100px);
    opacity: 0;
  }
  to {
    transform: translateY(0);
    opacity: 1;
  }
}

@keyframes slide-in-right {
  from {
    transform: translateX(100%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

.animate-slide-up {
  animation: slide-up 0.3s ease-out;
}

.animate-slide-in-right {
  animation: slide-in-right 0.3s ease-out;
}

.animate-fade-in {
  animation: fade-in 0.2s ease-out;
}

/* Halakha card text styling */
.halakha-text {
  text-align: justify;
}

.halakha-text b {
  font-weight: 700;
  color: #1f2937;
}

.halakha-text small {
  font-size: 0.9em;
  color: #6b7280;
}

/* Details/summary arrow rotation */
details[open] > summary .day-arrow {
  transform: rotate(-90deg);
}

/* Changelog details arrow */
details[open] > summary > span:first-child {
  transform: rotate(-90deg);
}

/* Hide default details marker */
summary {
  list-style: none;
}

summary::-webkit-details-marker {
  display: none;
}

/* Tap highlight removal for mobile */
button,
summary,
a {
  -webkit-tap-highlight-color: transparent;
}

/* Scrollbar styling */
::-webkit-scrollbar {
  width: 6px;
}

::-webkit-scrollbar-track {
  background: #f1f1f1;
}

::-webkit-scrollbar-thumb {
  background: #c1c1c1;
  border-radius: 3px;
}

::-webkit-scrollbar-thumb:hover {
  background: #a1a1a1;
}

/* Safe area for iOS */
@supports (padding: env(safe-area-inset-top)) {
  body {
    padding-top: env(safe-area-inset-top);
    padding-right: env(safe-area-inset-right);
    padding-bottom: env(safe-area-inset-bottom);
    padding-left: env(safe-area-inset-left);
  }
}

/* Custom z-index utilities not in standard Tailwind */
.z-45 {
  z-index: 45;
}

/* Tutorial gesture indicator animations */
@keyframes swipe-hint-right {
  0%, 100% {
    transform: translateX(0);
    opacity: 0.5;
  }
  50% {
    transform: translateX(20px);
    opacity: 1;
  }
}

@keyframes swipe-hint-left {
  0%, 100% {
    transform: translateX(0);
    opacity: 0.5;
  }
  50% {
    transform: translateX(-20px);
    opacity: 1;
  }
}

@keyframes tap-ripple {
  0% {
    transform: scale(0.8);
    opacity: 0.8;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.4;
  }
  100% {
    transform: scale(0.8);
    opacity: 0.8;
  }
}

@keyframes tap-ripple-delayed {
  0%, 20% {
    transform: scale(0.6);
    opacity: 0;
  }
  60% {
    transform: scale(1.4);
    opacity: 0.3;
  }
  100% {
    transform: scale(0.6);
    opacity: 0;
  }
}

.animate-swipe-right {
  animation: swipe-hint-right 1.5s ease-in-out infinite;
}

.animate-swipe-left {
  animation: swipe-hint-left 1.5s ease-in-out infinite;
}

.animate-tap-ripple {
  animation: tap-ripple 1.2s ease-in-out infinite;
}

.animate-tap-ripple-delayed {
  animation: tap-ripple-delayed 1.2s ease-in-out infinite;
}

/* Gesture indicator: grab and drag animations */
/* Timeline: 0-20% open hand, 20-30% crossfade to grab, 30-70% drag, 70-85% fade out, 85-100% reset */

@keyframes swipe-drag-right {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  /* Stay still while open hand is visible and during grab transition */
  30% {
    transform: translateX(0);
    opacity: 1;
  }
  /* Drag to the right (only after grab) */
  70% {
    transform: translateX(80px);
    opacity: 1;
  }
  /* Fade out at the end */
  85% {
    transform: translateX(100px);
    opacity: 0;
  }
  /* Reset while invisible */
  86% {
    transform: translateX(0);
    opacity: 0;
  }
  /* Fade back in at start position */
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

@keyframes swipe-drag-left {
  0% {
    transform: translateX(0);
    opacity: 1;
  }
  /* Stay still while open hand is visible and during grab transition */
  30% {
    transform: translateX(0);
    opacity: 1;
  }
  /* Drag to the left (only after grab) */
  70% {
    transform: translateX(-80px);
    opacity: 1;
  }
  /* Fade out at the end */
  85% {
    transform: translateX(-100px);
    opacity: 0;
  }
  /* Reset while invisible */
  86% {
    transform: translateX(0);
    opacity: 0;
  }
  /* Fade back in at start position */
  100% {
    transform: translateX(0);
    opacity: 1;
  }
}

/* Open hand: visible at start, fades out during grab transition */
@keyframes hand-open {
  0% {
    opacity: 1;
  }
  /* Visible during initial phase */
  20% {
    opacity: 1;
  }
  /* Fade out as grab hand takes over */
  30% {
    opacity: 0;
  }
  /* Stay hidden during drag */
  85% {
    opacity: 0;
  }
  /* Fade back in for reset */
  100% {
    opacity: 1;
  }
}

/* Grab hand: hidden at start, fades in during transition, stays for drag */
@keyframes hand-grab {
  0% {
    opacity: 0;
  }
  /* Hidden during open hand phase */
  20% {
    opacity: 0;
  }
  /* Fade in as open hand fades out */
  30% {
    opacity: 1;
  }
  /* Stay visible during drag */
  85% {
    opacity: 1;
  }
  /* Fade out during reset */
  86% {
    opacity: 0;
  }
  100% {
    opacity: 0;
  }
}

@keyframes double-tap {
  0%, 100% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  /* First tap down */
  15% {
    transform: translateY(4px) scale(0.95);
    opacity: 1;
  }
  /* First tap up */
  30% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  /* Brief pause */
  40% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
  /* Second tap down */
  55% {
    transform: translateY(4px) scale(0.95);
    opacity: 1;
  }
  /* Second tap up */
  70% {
    transform: translateY(0) scale(1);
    opacity: 1;
  }
}

.animate-swipe-drag-right {
  animation: swipe-drag-right 2.5s ease-in-out infinite;
}

.animate-swipe-drag-left {
  animation: swipe-drag-left 2.5s ease-in-out infinite;
}

.animate-hand-open {
  animation: hand-open 2.5s ease-in-out infinite;
}

.animate-hand-grab {
  animation: hand-grab 2.5s ease-in-out infinite;
}

.animate-double-tap {
  animation: double-tap 1.5s ease-in-out infinite;
}
